% ##################################################
% ENCODING
% ##################################################
\usepackage{cmap}               % PDF character encoding
\usepackage[T1]{fontenc}        % 8-bit font encoding
\usepackage[utf8]{inputenc}     % UTF-8 input encoding


% ##################################################
% DOCUMENT VARIABLES
% ##################################################
% Personal data
\newcommand{\docAuthor}{Bastian Hodapp}
\newcommand{\docMatriculationNumber}{271488}
\newcommand{\docStudyProgram}{Computer Science M.Sc.}
\newcommand{\docStreetName}{Bismarckstraße 25}
\newcommand{\docPostalCode}{78120}
\newcommand{\docCity}{Furtwangen}
\newcommand{\docEmail}{\url{https://orcid.org/0000-0001-7595-443X}}

% Document data
\newcommand{\docTitle}{RSSI-based Localization in LoRaWAN}
\newcommand{\docSubTitle}{}     % leave empty to remove
\newcommand{\docType}{Master Thesis}
\newcommand{\docSupervisor}{Prof. Dr. Richard Zahoransky}
\newcommand{\docCoSupervisor}{Michael Dörflinger}
\newcommand{\docDeadline}{31.08.2023}


% ##################################################
% GENERAL
% ##################################################
\usepackage{scrhack}            % better KOMA adaptions
\usepackage[table]{xcolor}      % color support
\usepackage{chngcntr}           % for renumbering stuff


% ##################################################
% PDF SETTINGS
% ##################################################
\usepackage[
    colorlinks=false,
   	linkcolor=black,
   	citecolor=black,
  	filecolor=black,
	urlcolor=black,
    bookmarks=true,
    bookmarksopen=true,
    bookmarksopenlevel=3,
    bookmarksnumbered,
    plainpages=false,
    pdfpagelabels=true,
    hyperfootnotes,
    pdftitle ={\docTitle},
    pdfauthor={\docAuthor},
    pdfcreator={\docAuthor}
]{hyperref}


% ##################################################
% FONTS AND SPACING
% ##################################################
\usepackage{xurl}
\renewcommand{\familydefault}{\sfdefault}   % default font
\usepackage[onehalfspacing]{setspace}       % default 1.5 spacing
\raggedbottom   % don't stretch spacing to fit page length

% font sizes and styles
\addtokomafont{chapter}{\sffamily\large\bfseries} 
\addtokomafont{section}{\sffamily\normalsize\bfseries} 
\addtokomafont{subsection}{\sffamily\normalsize\mdseries}
\addtokomafont{caption}{\sffamily\normalsize\mdseries}

% url font style
\usepackage{relsize}
\renewcommand*{\UrlFont}{\ttfamily\smaller\relax}

% SI units
\usepackage{siunitx}
\sisetup{per-mode=fraction}
\DeclareSIUnit{\belmilliwatt}{Bm}
\DeclareSIUnit{\dBm}{\deci\belmilliwatt}

% ##################################################
% PAGE FORMATTING
% ##################################################
% Page layout
\usepackage[
	bindingoffset=1.5cm,
	inner=2.5cm,
	outer=2.5cm,
	top=3cm,
	bottom=2cm
]{geometry}

% Page header
\usepackage[
    headsepline,        % seperator line beneath page header on normal pages
    plainheadsepline    % seperator line beneath page header on pages like ToC
]{scrlayer-scrpage}
\clearpairofpagestyles                  % clear default settings
\addtokomafont{pagehead}{\normalfont}   % use normal font for page header
\ohead*{\thepage}                       % page number
\ihead*{\leftmark}                      % chapter name


% ##################################################
% IMAGES AND FIGURES
% ##################################################
\usepackage{graphicx}       % support for including images
\graphicspath{{pictures/}}  % default path

% simple numbering without chapter
\renewcommand{\thefigure}{\arabic{figure}}
\counterwithout{figure}{chapter}

\usepackage{subcaption}

% ##################################################
% TABLES
% ##################################################
\usepackage{booktabs}   % beautiful table style
\usepackage{multirow}   % multi row and multi column table functionality

% simple numbering without chapter
\renewcommand{\thetable}{\arabic{table}}
\counterwithout{table}{chapter}

% ##################################################
% SOURCE CODE LISTINGS
% ##################################################
\usepackage{listings}
\usepackage{beramono}   % use a typewriter font which supports bold characters

\renewcommand{\lstlistlistingname}{List of Code Listings}   % 
\renewcommand{\lstlistingname}{Code Listing}
\newcommand{\listoflolentryname}{\lstlistingname}   % prefix for List of Code Listings

% define colors for source code highlighting
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.5,0,0.33}
\definecolor{codepurblue}{rgb}{0.16,0.0,1.0}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% set source code style
\lstdefinestyle{codestyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\bfseries\color{codepurple},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurblue},
    basicstyle=\scriptsize\ttfamily,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    escapeinside={(*@}{@*)}
}

% Stolen from here:
% https://github.com/knecht-d/EinfacheLatexvorlage/blob/master/settings/text.tex
\lstdefinelanguage{TypeScript}{
    keywords={typeof, new, true, false, catch, function, return, null, catch,
            switch, var, let, const, if, in, while, do, else, case, break, number, string, Date, async, await},
    ndkeywords={class, export, boolean, throw, implements, import, this, type, defaults, extends, from, as},
    ndkeywordstyle=\color{magenta}\bfseries,
    identifierstyle=\color{black},
    sensitive=true,
    morecomment=[s]{<}{>}, % Actually not a Comment but a Tag
    morestring=[b]',
    morestring=[b]",
    morestring=[b]`,
}

\lstdefinelanguage{JavaScript}{
    keywords={typeof, new, true, false, catch, function, return, null, catch,
            switch, var, let, const, if, in, while, do, else, case, break, number, string, Date, async, await},
    ndkeywords={class, export, boolean, throw, implements, import, this, defaults, extends},
    ndkeywordstyle=\color{magenta}\bfseries,
    identifierstyle=\color{black},
    sensitive=true,
    morecomment=[l]{//},
    morestring=[b]',
    morestring=[b]",
    morestring=[b]`,
}


\lstdefinelanguage{json}{
string=[s]{"}{"},
morecomment=[l]{//},
literate=
*{0}{{{\color{codegreen}0}}}{1}
{1}{{{\color{codegreen}1}}}{1}
{2}{{{\color{codegreen}2}}}{1}
{3}{{{\color{codegreen}3}}}{1}
{4}{{{\color{codegreen}4}}}{1}
{5}{{{\color{codegreen}5}}}{1}
{6}{{{\color{codegreen}6}}}{1}
{7}{{{\color{codegreen}7}}}{1}
{8}{{{\color{codegreen}8}}}{1}
{9}{{{\color{codegreen}9}}}{1}
{:}{{{\color{codegray}{:}}}}{1}
{,}{{{\color{codegray}{,}}}}{1}
{\{}{{{\color{codegray}{\{}}}}{1}
{\}}{{{\color{codegray}{\}}}}}{1}
{[}{{{\color{codegray}{[}}}}{1}
{]}{{{\color{codegray}{]}}}}{1}
}

\lstdefinelanguage{yaml}{
    identifierstyle=\color{codegray},
    sensitive=false,
    comment=[l]{\#},
    morestring=[b]',
    morestring=[b]"
}

\lstset{
    style=codestyle,
    numberbychapter=false,
    breaklines=true
}


% ##################################################
% TABLE OF CONTENTS
% ##################################################
\KOMAoptions{toc=chapterentrydotfill}       % dotted lines for chapters
\addtokomafont{chapterentry}{\normalfont}   % use normal font for chapter entries
\setuptoc{toc}{totoc}                       % add ToC to ToC

% spacing
\DeclareTOCStyleEntry[beforeskip=0cm]{chapter}{chapter}
\DeclareTOCStyleEntry[beforeskip=0cm]{section}{section}
\DeclareTOCStyleEntry[beforeskip=0cm]{default}{subsection}

% colons after entry names
\BeforeStartingTOC[lof]{\def\autodot{:}}
\BeforeStartingTOC[lot]{\def\autodot{:}}
\BeforeStartingTOC[lol]{\def\autodot{:}}


% ##################################################
% BIBLIOGRAPHY
% ##################################################
\usepackage{csquotes}
\usepackage[backend=biber,citestyle=ieee]{biblatex}
\addbibresource{bibtex.bib}
\setlength\bibitemsep{.5\baselineskip}
\setcounter{biburlnumpenalty}{9000} % break URLs on numbers
\setcounter{biburllcpenalty}{9000}  % break URLs on lower case letters
\setcounter{biburlucpenalty}{9000}  % break URLs on upper case letters


% ##################################################
% ABBREVIATIONS
% ##################################################
\usepackage[printonlyused]{acronym}


% ##################################################
% APPENDIX
% ##################################################
\usepackage[title,titletoc]{appendix}
\usepackage{pdfpages}

% appendix chapter
\newcommand{\appendixchapter}[1]{
    \cleardoublepage
    \pagenumbering{arabic}
    \renewcommand{\thepage}{\thechapter-\arabic{page}}
    \chapter{#1}
}

% insert monthly report pdf
\newcommand{\monthlyreport}[2]{
    \includepdf[pages=1,pagecommand={\thispagestyle{empty}\section{#1}}, scale=0.97, offset=0 -20]{#2}
    \includepdf[pages=2-, scale=1]{#2}
    \clearpage
}

% insert singlepage report month pdf
\newcommand{\monthlyreportSinglePage}[2]{
    \includepdf[pages=1,pagecommand={\thispagestyle{empty}\section{#1}}, scale=0.97, offset=0 -20]{#2}
    \clearpage
}


% ##################################################
% MISC
% ##################################################
% better referencing of images, tables, etc.
\usepackage{amsmath}
\usepackage[nameinlink, noabbrev]{cleveref} 

